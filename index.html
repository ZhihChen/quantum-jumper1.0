<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- 移动端核心适配：禁止缩放、适配屏幕宽度 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes"> <!-- 兼容iOS全屏 -->
    <title>量子跃迁者（手机版）</title>
    <!-- 引入样式文件（原有PC端样式 + 移动端新增样式） -->
    <link rel="stylesheet" href="./styles.css"> <!-- 保留原有PC端样式 -->
    <link rel="stylesheet" href="./mobile-styles.css"> <!-- 新增移动端样式 -->
    <!-- 引入Tailwind CSS（简化布局，也可替换为自定义CSS） -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 自定义Tailwind配置（适配游戏色调） -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dim-blue': '#3b82f6',
                        'dim-purple': '#8b5cf6',
                        'dim-cyan': '#06b6d4',
                        'dim-orange': '#f97316',
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-black text-white overflow-hidden">
    <!-- 粒子效果容器（背景装饰） -->
    <div id="particles" class="fixed inset-0 pointer-events-none z-0"></div>

    <!-- 游戏主容器（占满屏幕） -->
    <div class="container mx-auto px-2 h-screen flex flex-col relative z-10">
        <!-- 游戏画布（核心渲染区域） -->
        <div class="flex-1 relative">
            <canvas id="gameCanvas" class="game-canvas w-full h-full" width="640" height="1024"></canvas>

            <!-- 移动端虚拟控制器（固定在屏幕边缘） -->
            <div id="virtualControls" class="absolute inset-0 pointer-events-none">
                <!-- 左侧虚拟摇杆 -->
                <div id="joystick" class="absolute left-6 bottom-20 w-24 h-24 rounded-full bg-white/10 border border-dim-blue pointer-events-auto">
                    <div id="joystickKnob" class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full bg-dim-blue/30"></div>
                </div>

                <!-- 右侧动作按钮（跳跃 + 快速切换） -->
                <div class="absolute right-6 bottom-20 flex flex-col gap-4 pointer-events-auto">
                    <button id="jumpBtn" class="w-16 h-16 rounded-full bg-dim-purple/30 border border-dim-purple flex items-center justify-center text-2xl">
                        跳
                    </button>
                    <button id="quickSwitchBtn" class="w-16 h-16 rounded-full bg-dim-orange/30 border border-dim-orange flex items-center justify-center text-2xl">
                        快切
                    </button>
                </div>

                <!-- 顶部：维度切换按钮（1-4） -->
                <div class="absolute top-6 right-6 flex gap-2 pointer-events-auto">
                    <button class="dimension-btn w-12 h-12 rounded-lg bg-dim-blue/50 border border-dim-blue" data-dim="0">1</button>
                    <button class="dimension-btn w-12 h-12 rounded-lg bg-dim-purple/50 border border-dim-purple" data-dim="1">2</button>
                    <button class="dimension-btn w-12 h-12 rounded-lg bg-dim-cyan/50 border border-dim-cyan" data-dim="2">3</button>
                    <button class="dimension-btn w-12 h-12 rounded-lg bg-dim-orange/50 border border-dim-orange" data-dim="3">4</button>
                </div>

                <!-- 顶部：暂停按钮 -->
                <button id="pauseBtn" class="absolute top-6 left-6 w-12 h-12 rounded-lg bg-gray-500/50 border border-gray-400 pointer-events-auto">
                    ⏸
                </button>
            </div>

            <!-- 顶部：游戏状态面板（关卡 + 碎片） -->
            <div class="absolute top-6 left-1/2 -translate-x-1/2 bg-black/30 backdrop-blur-sm px-4 py-2 rounded-full text-sm pointer-events-none">
                <span id="levelDisplay">关卡: 1</span>
                <span class="mx-2">|</span>
                <span id="shardDisplay">碎片: 0</span>
            </div>

            <!-- 初始菜单覆盖层 -->
            <div id="gameOverlay" class="absolute inset-0 flex flex-col items-center justify-center bg-black/70 backdrop-blur-md z-20">
                <h2 class="text-4xl font-bold mb-8 text-dim-blue">量子跃迁者</h2>
                <button id="startBtn" class="px-8 py-4 bg-dim-blue/30 border border-dim-blue rounded-lg text-xl font-bold mb-4">
                    开始游戏
                </button>
                <a href="instructions.html" class="px-6 py-3 bg-gray-500/30 border border-gray-400 rounded-lg">
                    游戏说明
                </a>
            </div>

            <!-- 暂停菜单覆盖层（默认隐藏） -->
            <div id="pauseMenu" class="absolute inset-0 flex flex-col items-center justify-center bg-black/70 backdrop-blur-md z-20 hidden">
                <h3 class="text-2xl font-bold mb-6 text-dim-blue">游戏暂停</h3>
                <div class="flex flex-col gap-3">
                    <button id="resumeBtn" class="w-48 px-4 py-3 bg-dim-blue/30 border border-dim-blue rounded-lg">继续</button>
                    <button id="restartBtn" class="w-48 px-4 py-3 bg-dim-purple/30 border border-dim-purple rounded-lg">重新开始</button>
                    <button id="quitBtn" class="w-48 px-4 py-3 bg-gray-500/30 border border-gray-400 rounded-lg">返回主菜单</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 引入游戏核心逻辑（需放在body末尾，确保DOM加载完成） -->
    <script type="module" src="./main.js"></script>
</body>
</html>